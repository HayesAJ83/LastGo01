<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        
        <!-- Page Title -->
        <title>Surgical Names</title>

        <!-- Favicons -->
        <link rel="apple-touch-icon" sizes="180x180" href="/static/assets/img/favicons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/static/assets/img/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/static/assets/img/favicons/favicon-16x16.png">
        <link rel="manifest" href="/static/assets/img/favicons/site.webmanifest">
        <link rel="mask-icon" href="/static/assets/img/favicons/safari-pinned-tab.svg" color="#f23838">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">

        <!-- Vendor Stylesheets -->
        <link href="https://fonts.googleapis.com/css?family=Oswald:300,400,500,700%7CRoboto:300,400,700" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css" rel="stylesheet"> 
        <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet"/>
        <link href="https://fonts.googleapis.com/css?family=Oswald:300,400,500,700%7CRoboto:300,400,700" rel="stylesheet">
        <!-- MDB -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.3.0/mdb.min.css" rel="stylesheet"/>

        <!--Plugin CSS file with desired skin-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/css/ion.rangeSlider.min.css"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="undefined" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tail.select@0.5.15/css/bootstrap4/tail.select-default.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css">
        <script type="test/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.6.0/papaparse.min.js"></script>

        <!-- Mapbox -->
        <link href="https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css" rel="stylesheet">
        <script src="https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js"></script>


        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet"/>
        <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js"></script>
        <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css" rel="stylesheet"/>
        
      
   

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-129313359-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-129313359-1');
        </script>


        <!-- Theme Stylesheets -->
        <link href="/static/assets/css/theme.css" rel="stylesheet">

        <script src="https://bossanova.uk/jspreadsheet/v4/jexcel.js"></script>
        <link rel="stylesheet" href="https://bossanova.uk/jspreadsheet/v4/jexcel.css" type="text/css" />
 
        <link rel="stylesheet" href="https://jsuites.net/v4/jsuites.css" type="text/css" />

        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css" rel="stylesheet"/>

        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
        <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js'></script>
        <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css' rel='stylesheet' />
         
        <style>
            body { margin: 0; padding: 0; }
            #map { position: absolute; height: 280px; width: 350px; top: 0; right: 0; bottom: 0; left: 0; margin: auto; }
            .mapboxgl-popup { max-width: 200px; }
            .mapboxgl-popup-content {
                text-align: center;
                font-family: 'Open Sans', sans-serif;
                }
        </style>

    </head>

    <body>
        <!-- Preloader -->
        <div class="preloader">
            <div class="row align-items-center text-center">
                <div class="col">
                    <h1 class="text-danger mb-2 fs-3" style="height:50px"><br><br><br>Loading...</h1>
                </div>
            </div>
            <div class="spinner">
                <div class="circles"></div>
            </div>
        </div>
        <!-- End of Preloader -->

        <!-- Header -->
        <header class="spyre-navbar navbar navbar-expand-lg bg-secondary navbar-dark fixed-top align-items-center" data-transparent data-text-color="#ffffff">
            <div class="container">
                <a class="navbar-brand mr-lg-5 mr-xl-7" href="{{ url_for('.index', _anchor='section-4') }}">
                    <img src="/static/assets/img/EponymExplorer.png" class="d-none d-lg-block" alt="EponymExplorer" width="183" />
                    <img src="/static/assets/img/EponymExplorer.png" class="d-block d-lg-none" alt="EponymExplorer" width="150" />
                </a>
            </div>
        </header>
        <!-- End of Header -->

        <!-- Main Content -->
        <main class="main minh-100vh">
            <!-- Section -->
            <section class="py-0 overflow-hidden text-center" id="section-1">
                <div class="bg-container overlay parallax" data-rellax-percentage="0.5" style="background-image: url(/static/assets/img/backgrounds/iStock-583857946_big.jpg)"></div>
                <div class="container">
                    <div class="row h-100vh justify-content-center align-items-center">
                        <div class="col">
                            <p class="mb-5 fs-3 text-white text-uppercase font-weight-bold" data-aos="fade-down" data-aos-duration="1500"><br>Search<br>- A to Z -</p>
                            <p class="mb-5 fs-2 text-white font-weight-bold" data-aos="zoom-in" data-aos-delay="100">Filter by specialties of interest<br></p>
                            <p class="mb-5 fs-1 text-white" data-aos="zoom-in" data-aos-delay="100">Find eponym definitions, historical context, photographs, references & weblinks</p>
                        </div>
                        <div class="move d-none d-lg-block">
                            <a href="#section-2" data-smooth-scroll data-smooth-scroll-hash="false">
                                <i class="zmdi zmdi-long-arrow-down zmdi-hc-2x"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </section>
            <!-- End of Section -->
            
            <!-- Section -->
            <section id="section-2" class="pt-7 pb-0 bg-blue-light">
                <div class="container" style="height:215px">
                    <div class="row align-items-center text-center">
                        <div class="col" data-aos="flip-down">
                            <h1 class="text-black mb-2 fs-1" style="height:30px">Specialties</h1>
                            <button type="button" class="btn btn-primary active" id="btn_all">All</button>
                            <button type="button" class="btn btn-light" id="btn_select">Select</button>
                        </div>
                    </div>
                    <hr style="height:1px; visibility:hidden">
                    <form method="POST">
                        <div class="row align-items-center text-center">
                            <div class="col" data-aos="zoom-in" id="selector" style="display:none">
                                <select id="select1" class="selectpicker data-style="btn-white""
                                    name="min_multi_select" 
                                    multiple title=" -- specialties -- " 
                                    data-width="340px"
                                    multiple data-actions-box="true"
                                    data-size="6"
                                    multiple data-selected-text-format="count > 3"
                                    data-style="btn-primary">
                                </select>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="container">
                    <div class="row align-items-center text-center">
                        <div class="col" data-aos="fade-up" id="select3">
                            <h1 class="text-black mb-2 fs-1" style="height:30px">Eponyms</h1>
                            <select id="sel" class="selectpicker show-tick"
                                    data-style="btn-primary" data-header="Search list:" 
                                    data-width="340px" data-size="6"
                                    data-aos="zoom-in"
                                    data-dropup-auto="true"
                                    data-live-search="true" onchange="show(this.value);">
                                    <option value=""> -- select -- </option>
                            </select>
                            <div class="lead" id='imgName'></div>
                            <p class="lead" id="info"></p>
                            <p></p>
                            <p></p>
                        </div>
                    </div>
                </div>
                <div class="container">
                    <div class="row align-items-center text-center">
                        <div class="col" data-aos="zoom-in" id="select4" style="display:none"> <!--works-->
                            <h1 class="text-black mb-2 fs-1" style="height:30px">Eponyms</h1>
                            <select id="SEL2" class="selectpicker show-tick"
                                    data-style="btn-primary" data-header="Search list:" 
                                    data-width="340px" data-size="6"
                                    data-dropup-auto="true"
                                    data-live-search="true" onchange="show2(this.value);">
                                    <option value=""> -- select -- </option>
                            </select>
                            <div class="lead" id='imgName2'></div>
                            <p class="lead" id="msg2"></p>
                            <br>
                        </div>
                    </div>
                </div>
                <br>
                <br>
                <br>
                <br>
            </section>
            <!-- End of Section -->
            
            <!-- Section -->     
            <section class="py-6 py-lg-8 bg-primary text-white" id="section-3">
                <div class="container" style="height:210px">
                    <div class="row align-items-center text-center">
                        <div id="map"></div>
                    </div>
                </div>
            </section>
        </main>
        <!-- End of Main Content -->

        <!-- Footer -->
        <footer class="footer text-white" style="background-image: url(/static/assets/img/backgrounds/iStock-532331964_op.jpg)">
            <div class="container d-flex h-100">
                <div class="row flex-grow-1">
                    <div class="col d-flex flex-column mb-2 mt-3 pl-lg-7">
                        <div class="col-6 col-lg-3">
                            <br></br>
                            <h6 class="mb-1 mb-lg-4 text-uppercase">About</h6>
                            <ul class="pt-2 mb-5 fw-light list-unstyled">
                                <li class="my-1"><a href="#" class="text-white">Design Team</a></li>
                                <li class="my-1"><a href="#" class="text-white">Contact Us</a></li>
                            </ul>
                        </div>
                        <div class="mt-auto d-flex justify-content-between">
                            <span class="fs--3 fs-lg--2">&copy; 2021 SurgicalNames.com | Excision Ltd, Scotland, UK</span>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!-- End of Footer -->

        <!-- Javascripts -->
        <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="undefined" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/tail.select@0.5.15/js/tail.select-full.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/rellax@1.12.1/rellax.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
        <script>
            // Accepts any class name
            var rellax = new Rellax('.rellax');
        </script>

        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <script>
            AOS.init();
        </script>

        <!--Plugin JavaScript file-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/js/ion.rangeSlider.min.js"></script>   
        <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>
        <script src="https://jsuites.net/v4/jsuites.js"></script>

        <!-- Load d3.js -->
        <script src="https://d3js.org/d3.v4.js"></script>







        <script>
            const eponyms = {
                'type': 'FeatureCollection',
                'features': [
        {   
            type:'Feature',
            ID: 1, 
            name:"Aaron sign",                 
            topic:["General Surgery"],
            subtype:["Signs"],                  
            who:"Charles Dettie Aaron", 
            whoSearch:["Charles D Aaron",],          
            where:"Detroit - Michigan - USA", 
            whereSearch:["Detroit, Michigan, USA", "Michigan, USA", "USA"],            
            when:"1913",
            disease:["Abdominal pain","Appendicitis",],  
            ops:["Appendicectomy",], 
            geometry: {type: 'Point', coordinates: [ -83.0571, 42.35211] },            //lng,lat
            properties: {title:'Aaron sign', description:'Detroit<br>1913'},
            lat:"42.35211", long:"-83.0571",
            googlehtz:1400, //search: "Aaron sign" AND "Appendicitis" [02-Oct-21]
            refs:"<br>Aaron CD. A sign indicative of chronic appendicitis. <i>JAMA</i>. 1913; 60(5): 350-351<br>",    
            jrnls:["JAMA",],
            imgName:"<br><img src=\"../static/assets/img/profiles/Charles_Dettie_Aaron.png\" class=\"card-img\" style=\"width:12rem;\">",
            about:"<br>Aaron's sign, indicitive of chronic appendicitis, is demonstrated by prolonged firm pressure at McBurney's point which produces pain in the epigastric region. In Aaron's 1913 paper, he describes his findings in four patients.<br><br>", 
            acknow:"",//<br><br><br><i>We kindly acknowledge Miss XX FRCS who contributed the above information.</i>",
            URLs:"<br><br><a href='https://jamanetwork.com/journals/jama/article-abstract/214191' target='_blank' class='btn btn-secondary' role='button'>Original Paper</a> <a href='https://en.wikipedia.org/wiki/Aaron%27s_sign' target='_blank' class='btn btn-info' role='button'>Wikipedia</a> <br><br>",       
        
        
        },{ 
            type:'Feature',
            ID: 10, 
            name:"Artery of Adamkiewicz",      
            topic:["Vascular", "Neurosurgery"], 
            subtype:["Anatomy",], 
            who:"Albert Wojciech Adamkiewicz",  
            whoSearch:["Albert W Adamkiewicz",],   
            where:"Kraków - Poland",  
            whereSearch:["Kraków, Poland", "Poland",],                   
            when:"1881",
            disease:["Spinal cord injury", "Paralysis",],
            ops:["Abdominal aortic aneurysm repair",],
            geometry: {type: 'Point', coordinates: [ 19.93482 , 50.06114 ]},            //lng,lat
            properties: {title:'Artery of Adamkiewicz', description:'Kraków<br>1881'},
            refs:"",//  
            imgName:"<br><img src=\"../static/assets/img/profiles/Adamkiewicz.png\" class=\"card-img\" style=\"width:12rem;\">",
            about:"<br>The artery of Adamkiewicz is known by other terms, including arteria radicularis magna. This vessel is a major contributor to the anterior spinal artery which gives arterial supply to the lumbar and sacral cord and nerves. The artery of Adamkiewicz arises from intercostal arteries which branch from the thoraco-abdominal aorta.<br>", 
            acknow:"",//"<hr class='my-4'><i>We kindly acknowledge Miss XX FRCS who contributed the above information.</i>",
            URLs:"<br><a href='https://en.wikipedia.org/wiki/Artery_of_Adamkiewicz' target='_blank' class='btn btn-info' role='button'>Wikipedia</a><br>",    
        
    
        },{ 
            type:'Feature',
            ID: 30, 
            name:"Allis forceps",      
            topic:["General Surgery",],
            subtype:["Instruments",],  
            who:"Oscar Huntington Allis",  
            whoSearch:["Oscar H Allis",], 
            where:"Philadelphia - Pennsylvania - USA", 
            whereSearch:["Philadelphia", "Pennsylvania", "USA",],                   
            when:"1883",
            ops:["Parathyroidectomy", "Thyroidectomy",],
            geometry: {type: 'Point', coordinates: [ -75.199043 , 39.958329 ]},            //lng,lat
            properties: {title:'Allis forceps', description:'Philadelphia<br>1883'},
            //googlehtz:0, //search: " " AND " " [02-Oct-21]
            refs:"",  
            imgName:"<br><img src=\"../static/assets/img/profiles/Oscar_H_Allis.png\" class=\"card-img\" style=\"width:12rem;\">",
            about:"",//, 
            acknow:"",//<br><br><br><i>We kindly acknowledge Miss XX FRCS who contributed the above information.</i>",
            URLs:"",//"<br><a href='#' class='btn btn-outline-primary' role='button'>original paper</a><br>", //
        

        },{ 
            type:'Feature',
            ID: 60, 
            name:"Altemeier procedure",      
            topic:["Colorectal",],
            subtype:["Operations",],  
            who:"William Altemeier",  
            whoSearch:["William Altemeier",], 
            where:"Cincinnati - Ohio - USA", 
            whereSearch:["Cincinnati, Ohio, USA", "Ohio, USA", "USA",],                   
            when:"1952",
            disease:["Rectal prolapse",],
            ops:["Rectal surgery",],  
            geometry: {type: 'Point', coordinates: [ -84.5035 , 39.1375 ]},            //lng,lat
            properties: {title:'Altemeier procedure', description:'Cincinnati<br>1952'},
            //googlehtz:0, //search: "  " AND "  " [02-Oct-21]
            refs:"<br>Altemeier WA, Giuseffi J, Hoxworth P. Treatment of extensive prolapse of the rectum in aged or debilitated patients. <i>AMA Arch Surg</i>. 1952; 62(1): 72-80<br><br>Altemeier WA, Culbertson WR, Alexander JW. One-stage perineal repair of rectal prolapse. Twelve years' experience. <i>Arch Surg</i>. 1964; 89: 6-16<br>",   
            jrnls:["AMA Arch Surg",],
            imgName:"<br><img src=\"../static/assets/img/profiles/William_A_Altemeier.png\" class=\"card-img\" style=\"width:12rem;\">",
            about:"",//,
            URLs:"<br><a href='https://jamanetwork.com/journals/jamasurgery/article-abstract/562520' target='_blank' class='btn btn-secondary' role='button'>Original Paper</a>", //no wiki
            acknow:"",//<i>We kindly acknowledge Miss XX FRCS who contributed the above information.</i>",
        


        },{  
            type: 'Feature',
            ID: 70, 
            name:"Alvarado score",      
            topic:["General Surgery",],
            subtype:["Scores"],  
            who:"Alfredo Alvarado",  
            whoSearch:["Alfredo Alvarado",], 
            where:"Plantation - Florida - USA", 
            whereSearch:["Plantation, Broward County, Florida, USA", "Florida", "USA",],                   
            when:"1986",
            disease:["Abdominal pain", "Appendicitis", "Sepsis",],  
            ops:["Appendicectomy",],
            geometry: {type: 'Point', coordinates: [ -80.2052, 26.1265 ]},            //lng,lat
            properties: {title:'Alvarado score', description:'Florida<br>1986'},
            lat:"26.1265", long:"-80.2052",
            refs:"<br>Alvarado A. A practical score for the early diagnosis of acute appendicitis. <i>Ann Emerg Med</i>. 1986; 15(5): 557-564",    
            jrnls:["Ann Emerg Med",],
            imgName:"",//"<br><img src=\"../static/assets/img/profiles/Alfredo_Alvarado.png\" class=\"card-img\" style=\"width:12rem;\">", //temporary replacement
            about:"",//
            acknow:"",//    
            URLs:"<br><br><a href='https://en.wikipedia.org/wiki/Alvarado_score' target='_blank' class='btn btn-info' role='button'>Wikipedia</a><br>",       
        

            
        
        },{
            type:'Feature',
            ID: 90, 
            name:"Amyand hernia",              
            topic:["General Surgery"],  
            subtype:["Pathology"],                
            who:"Claudius Amyand", whoSearch:["Claudius Amyand",],            
            where:"London - England", whereSearch:["London, England, UK", "England", "UK"],             
            when:"1735",
            disease:["Appendicitis", "Groin pain", "Groin hernia"], 
            ops:["Appendicectomy", "Groin hernia repair",],
            geometry: {type: 'Point', coordinates: [ -0.15272 , 51.50238 ]}, //lng,lat
            properties: {title:'Amyand hernia', description:'London<br>1735'},    
            refs:"<br>Amyand C. 1735 VIII. Of an inguinal rupture, with a pin in the appendix coeci, incrusted with stone; and some observations on wounds in the guts. <i>Phil Trans R Soc</i>. 39; 329-342<br>",    
            jrnls:["Phil Trans R Soc",],
            imgName:"<br><img src=\"../static/assets/img/profiles/Claudius_Amyand.png\" class=\"card-img\" style=\"width:12rem;\">",
            about:"<b>An inguinal hernia in which the appendix is contained within the herniating sac</b>.<br><br>Claudius Amyand, Serjeant Surgeon to King George II, reported the case of an 11 year old boy who presented to St. George's Hospital (near Hyde Park Corner at that time) with a discharging fistula between the scrotum and right thigh. <br><br>Amyand describes amputating the perforated appendix by securing a ligature around healthy part of the proximal appendix, and leaving a stump which was returned to the abdomen. The hernia sac was excised, and the fistulous tract was debrided and left open to drain.<br><br>", 
            acknow:"<hr class='my-4'><i>Thanks to Mr Alastair J Hayes FRCSEd who contributed the above information.</i>",
            URLs:"<br><br><a href='https://royalsocietypublishing.org/doi/pdf/10.1098/rstl.1735.0071' target='_blank' class='btn btn-secondary' role='button'>Original Paper</a> <a href='https://en.wikipedia.org/wiki/Amyand%27s_hernia' target='_blank' class='btn btn-info' role='button'>Wikipedia</a> <br><br>",
        


        },{ 
            type:'Feature',
            ID:100, 
            name:"Appleby procedure",      
            topic:["Oesophagogastric","HPB",],
            type:["Operations",],  
            who:"Lyon Henry Appleby",  
            whoSearch:["Lyon H Appleby",], 
            where:"Vancouver - Canada", 
            whereSearch:["Vancouver", "Canada",],                   
            when:"1953",
            disease:["Gastric cancer",],  
            ops:["Gastrectomy",],
            geometry: {type: 'Point', coordinates: [ -123.127887, 49.280431 ]},            //lng,lat
            properties: {title:'Appleby procedure', description:'Vancouver<br>1953'},
            //googlehtz:1400, //search: " sign" AND "" [02-Oct-21]
            refs:"<br>Appleby LH. The coeliac axis in the expansion of the operation for gastric carcinoma. <i>Cancer</i>. 1953; 6(4): 704-707<br>",  
            jrnls:["Cancer",],
            imgName:"",//"<br><img src=\"../static/assets/img/profiles/Lyon_Appleby.png\" class=\"card-img\" style=\"width:12rem;\">", //temporary replacement
            about:"",//<br><br><br>", 
            URLs:"<br><br><a href='https://acsjournals.onlinelibrary.wiley.com/doi/10.1002/1097-0142(195307)6:4%3C704::AID-CNCR2820060410%3E3.0.CO;2-P' target='_blank' class='btn btn-secondary' role='button'>original paper</a><br>", //no wiki
            acknow:"",//<br><br><br><i>We kindly acknowledge Miss XX FRCS who contributed the above information.</i>",
        
        
        },{
            type:'Feature',
            ID:150, 
            name:"Barrett's oesophagus",      
            topic:["General Surgery", "Oesophagogastric",],     
            subtype:["Pathology",],
            who:"Norman Barrett",  
            whoSearch:["Norman Barrett",],  
            where:"London - England",           
            whereSearch:["London", "England", "UK",],          
            when:"1950",
            disease:["Oesophageal cancer",], 
            ops:["Endoscopy", "Oesophagectomy",],
            geometry: {type: 'Point', coordinates: [ 51.49883 , -0.1188]},            //lng,lat
            properties: {title:"Barrett's oesophagus", description:'London<br>1950'},
            lat:"-0.1188", long:"51.49883",
            refs:"<br>Barrett NR. Chronic peptic ulcerz of the oeophagus and ‘oesophagitis’. <i>Br J Surg</i>. 1950; 38(150): 175-182<br>",   
            jrnls:["Br J Surg",],
            imgName:"<br><img src=\"../static/assets/img/profiles/Norman_Rupert_Barrett.png\" class=\"card-img\" style=\"width:12rem;\">",
            about:"", 
            acknow:"",
            URLs:"<br><a href='https://en.wikipedia.org/wiki/Barrett%27s_esophagus' target='_blank' class='btn btn-info' role='button'>wikipedia</a><br>",
    
       },{
            type:'Feature',
            ID:3350, 
            name:"Zargar's classification",      
            topic:["Oesophagogastric"], 
            subtype:["Scores",],        
            who:"Showkat Zargar",  
            whoSearch:["Showkat Zargar",],  
            where:"Chandigarh - India",        
            whereSearch:["Chandigarh, India", "India"],
            when:"1991",   
            disease:["Caustic burns",], 
            ops:["Endoscopy",],
            geometry: {type: 'Point', coordinates: [ 76.77581, 30.76453]},            //lng,lat
            properties: {title:"Zargar's classification", description:'Chandigarh<br>1991'},
            lat:"30.76453", long:"76.77581",
            refs:"<br>Zargar SA, Kochhar R, Mehta S, Mehta SK. The role of fiberoptic endoscopy in the management of corrosive ingestion and modified endoscopic classification of burns. <i>Gastrointest Endosc</i>. 1991; 37(2): 165-169<br>",
            jrnls:["Gastrointest Endosc",],
            imgName:"",
            about:"",
            URLs:"",
            acknow:"",
        },
    ]
    }
        </script>





<script>
    $(document)
    .ready(function() {
    let result1 = eponyms.features
        .flatMap(item => item.topic)
        .filter((item, i, arr) => arr.indexOf(item) === i)
        let resultsort1 = result1.sort()
        var select = document.getElementById("select1");
        var options = resultsort1;
        for(var i = 0; i < options.length; i++) {
            var opt = options[i];
            var el = document.createElement("option");
            el.textContent = opt;
            el.value = opt;
            select.appendChild(el);
            }
    console.log()
        });

    ///  DEFAULT_PAGE_1  ///
    $(document)
    .ready(function() {
        $('#select1').ready(function() {
            let value = '\'' + $('#select1 option').map(function() {
                    return this.text}).get().join('\',\'') + '\'';
            var stringArray = (new Function("return [" + value+ "];")());
        });
    });

    ///  DEFAULT_PAGE_2  ///
    var selected = eponyms.features
    function populateSelect() {
        var ele = document.getElementById('sel');
        selected.forEach(function(b) {
            ele.innerHTML += '<option value="' + b.ID + '">' + b['name'] + '</option>';})
        }
    console.log(selected)
    populateSelect()

    let select ="";
    $("#select1").find('option:selected').each(function() {
            select += "\'" + $.trim($(this).text()) + "\',";});
            if(select != ""){select = select.substr(0);};
        var stringArray = (new Function("return [" + select+ "];")());
        
    function topicFilter2(taxonomy) {
        taxonomy = Array.isArray(taxonomy) ? taxonomy : [taxonomy];
        return eponyms.features.filter(item => {
            let topic = Array.isArray(item.topic) ? item.topic : [item.topic];
            return taxonomy.some(med => topic.includes(med));
            });
        }
            
    var selected2 = topicFilter2(stringArray); 


///  SELECTED_SPECIALTIES_1  ///
    $(document)
    .ready(function() {
    $('#btn_select').on('click', function() {
        $('#btn_all').removeClass("btn btn-primary active");
        $('#btn_all').addClass("btn btn-light");
        $('#btn_select').removeClass("btn btn-light");
        $('#btn_select').addClass("btn btn-primary active");
        $('#selector').fadeIn(50);
        $('#select3').fadeOut(50);
        
        let select = "";
        $("#select1").find('option:selected').each(function() {
        select += "\'" + $.trim($(this).text()) + "\',";
        });
        if (select != "") {
            select = select.substr(0);
        }
        var stringArray = (new Function( "return [" + select + "];")());
        function topicFilter2(taxonomy) {
            taxonomy = Array.isArray(taxonomy) ? taxonomy : [taxonomy];
        return eponyms.features.filter(item => {
            let topic = Array.isArray(item.topic) ? item.topic : [item.topic];
            return taxonomy.some(med => topic.includes(med));
            });
            }
        var select2 = topicFilter2(stringArray);

        if (!select2.length) {var push = "";} 
        else {
            var push = select2.reduce((options, {ID,name}) =>
                options += `<option value="${ID}">${name}</option>`);
                }
        
        function populateSelect() {
            if (!select2.length) {var push = "";}
            else {
                var push = select2.reduce((options, {ID,name}) =>
                    options += `<option value="${ID}">${name}</option>`);
                    }}
        
        populateSelect()
        $( '#SEL2' ).html(push);
        show()
                }).trigger("change")
        });
</script>

<script>  ///  SELECTED_SPECIALTIES_2  ///
    $('#select1').on('change', function() {
        let select ="";
        $("#select1").find('option:selected').each(function() {
            select += "\'" + $.trim($(this).text()) + "\',";});
            if(select != ""){select = select.substr(0);};
        var stringArray = (new Function("return [" + select+ "];")());
        console.log(stringArray); //works Array [chosen options]
        
        function topicFilter2(taxonomy) {
            taxonomy = Array.isArray(taxonomy) ? taxonomy : [taxonomy];
            return eponyms.features.filter(item => {
                let topic = Array.isArray(item.topic) ? item.topic : [item.topic];
                return taxonomy.some(med => topic.includes(med));
                });
            }
        
        var selected2 = topicFilter2(stringArray); //works for stringArray no brackets
        //console.log(selected2)

        function populateSelect2() {
            document.getElementById('SEL2').innerHTML = selected2.reduce((options, {ID,name}) =>
                options += `<option value="${ID}">${name}</option>`,
                '<option value=""> -- select -- </option>'
                );
            }
    
        populateSelect2()
        
        $('#select4').fadeIn(50);
        $('#SEL2').selectpicker('refresh');
        $('#select1').on('change', function() {
            $('#select1').selectpicker('toggle'); //added to toggle open/close
            $('#SEL2').selectpicker('refresh');
            });
    });
        
   
    $('#SEL2').change(function() {
        let select ="";
        $("#select1").find('option:selected').each(function() {
            select += "\'" + $.trim($(this).text()) + "\',";});
            if(select != ""){select = select.substr(0);};
        var stringArray = (new Function("return [" + select+ "];")());
        
        function topicFilter2(taxonomy) {
            taxonomy = Array.isArray(taxonomy) ? taxonomy : [taxonomy];
            return eponyms.features.filter(item => {
                let topic = Array.isArray(item.topic) ? item.topic : [item.topic];
                return taxonomy.some(med => topic.includes(med));
                });
            }
            
        var selected2 = topicFilter2(stringArray);
        console.log(selected2)
        function show(id) {
            var msg = document.getElementById('msg');
            if (!id) {msg.innerHTML = "";
            } else {
                for (var i = 0; i < eponyms.features.length; i++) {
                if  (Number(id) === eponyms.features[i].ID) {
                    msg.innerHTML = "<br><br>"+
                                    'Who'   +":   "+ eponyms.features[i].who.bold()   +"<br>"+
                                    'Where' +":   "+ eponyms.features[i].where.bold() +
                                    eponyms.features[i].acknow;
                                    }}}}
        }).trigger("change")


    $('#select4').change(function() {
        let select ="";
        $("#select1").find('option:selected').each(function() {
            select += "\'" + $.trim($(this).text()) + "\',";});
            if(select != ""){select = select.substr(0);};
        var stringArray = (new Function("return [" + select+ "];")());
        
        function topicFilter2(taxonomy) {
            taxonomy = Array.isArray(taxonomy) ? taxonomy : [taxonomy];
            return eponyms.features.filter(item => {
                let topic = Array.isArray(item.topic) ? item.topic : [item.topic];
                return taxonomy.some(med => topic.includes(med));
                });
            }
            
        var selected2 = topicFilter2(stringArray);
        console.log(selected2)
        
        }).trigger("change")
    
</script>

<script>
///////  RETURN_TO_ALL  ///////
    $('#btn_all').on('click', function() {
        $('#btn_all').removeClass("btn btn-light");
        $('#btn_all').addClass("btn btn-primary active");
        $('#selector').fadeOut(50);
        $('#btn_select').removeClass("btn btn-primary active");
        $('#btn_select').addClass("btn btn-light");
        $('#select4').fadeOut(50);
        $('#select1').ready(function() {
            let value = '\'' + $('#select1 option').map(function() {
                return this.text}).get().join('\',\'') + '\'';
            var stringArray = (new Function("return [" + value+ "];")());
            });
        $('#select3').fadeIn(50);
    });
</script>

<script>

    function show(id) {   
        var imgName = document.getElementById('imgName');
        if (!id) {imgName.innerHTML = "";
        } else {
            for (var i = 0; i < eponyms.features.length; i++) {
            if  (Number(id) === eponyms.features[i].ID) {
                imgName.innerHTML = eponyms.features[i].imgName
                                        ;}}}
                                    $('.imgName').fadeIn('slow');

        var info = document.getElementById('info');
        if (!id) {imgName.innerHTML = "";
        } else {
            for (var i = 0; i < eponyms.features.length; i++) {
            if  (Number(id) === eponyms.features[i].ID) {
                info.innerHTML =    "<br>"+
                                    eponyms.features[i].who.bold()   +"<br>"+
                                    eponyms.features[i].when.bold()  +"<br>"+
                                    eponyms.features[i].where.bold() +"<br><br>"+
                                    eponyms.features[i].about +
                                    eponyms.features[i].refs +
                                    eponyms.features[i].URLs +
                                    eponyms.features[i].acknow
                                        ;}}}
                                    $('.info').fadeIn('slow');
                                
                                    }                           
</script>

<script>
    function show2(id) {

    var imgName2 = document.getElementById('imgName2');
    if (!id) {imgName2.innerHTML = "";
    } else {
        for (var i = 0; i < eponyms.features.length; i++) {
        if  (Number(id) === eponyms.features[i].ID) {
            imgName2.innerHTML = eponyms.features[i].imgName
                                    ;}}}
                                $('.imgName2').fadeIn('slow');
    
    var msg2 = document.getElementById('msg2');
    if (!id) {msg2.innerHTML = "";
    } else {
        for (var i = 0; i < eponyms.features.length; i++) {
        if  (Number(id) === eponyms.features[i].ID) {
            msg2.innerHTML = "<br>"+
                             eponyms.features[i].who.bold()   +"<br>"+
                             eponyms.features[i].when.bold()  +"<br>"+
                             eponyms.features[i].where.bold() +"<br><br>"+
                             eponyms.features[i].about +
                             eponyms.features[i].refs +
                             eponyms.features[i].URLs +
                             eponyms.features[i].acknow
                                    ;}}}
                                $('.msg2').fadeIn('slow');
                                }
</script>

<script src="/static/assets/js/theme.js"></script>


<script>

	// TO MAKE THE MAP APPEAR YOU MUST
	// ADD YOUR ACCESS TOKEN FROM
	// https://account.mapbox.com
	mapboxgl.accessToken = 'pk.eyJ1IjoiYWpoYXllczgzIiwiYSI6ImNrY2pqM2lvMDB4Z24ydG8zdDl0NTYwbTUifQ.2DKVfTAaE77XAXMpDeq_Pg';
  
    const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/dark-v10',
        center: [-45, 37],
        zoom: -0.5
    });

    map.on('load', () => {
        // Add a new source from our GeoJSON data and
        // set the 'cluster' option to true. GL-JS will
        // add the point_count property to your source data.
        map.addSource('earthquakes', {
            type: 'geojson',
            // Point to GeoJSON data. This example visualizes all M1.0+ earthquakes
            // from 12/22/15 to 1/21/16 as logged by USGS' Earthquake hazards program.
            data: eponyms,
            //'https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson',
            cluster: true,
            clusterMaxZoom: 14, // Max zoom to cluster points on
            clusterRadius: 50 // Radius of each cluster when clustering points (defaults to 50)
        });

        map.addLayer({
            id: 'clusters',
            type: 'circle',
            source: 'earthquakes',
            filter: ['has', 'point_count'],
            paint: {
                // Use step expressions (https://docs.mapbox.com/mapbox-gl-js/style-spec/#expressions-step)
                // with three steps to implement three types of circles:
                //   * Blue, 20px circles when point count is less than 100
                //   * Yellow, 30px circles when point count is between 100 and 750
                //   * Pink, 40px circles when point count is greater than or equal to 750
                'circle-color': [
                    'step',
                    ['get', 'point_count'],
                    '#51bbd6',
                    100,
                    '#f1f075',
                    750,
                    '#f28cb1'
                ],
                'circle-radius': [
                    'step',
                    ['get', 'point_count'],
                    20,
                    100,
                    30,
                    750,
                    40
                ]
            }
        });

        map.addLayer({
            id: 'cluster-count',
            type: 'symbol',
            source: 'earthquakes',
            filter: ['has', 'point_count'],
            layout: {
                'text-field': '{point_count_abbreviated}',
                'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],
                'text-size': 12
            }
        });

        map.addLayer({
            id: 'unclustered-point',
            type: 'circle',
            source: 'earthquakes',
            filter: ['!', ['has', 'point_count']],
            paint: {
                'circle-color': '#11b4da',
                'circle-radius': 5,
                'circle-stroke-width': 1,
                'circle-stroke-color': '#fff'
            }
        });

        // inspect a cluster on click
        map.on('click', 'clusters', (e) => {
            const features = map.queryRenderedFeatures(e.point, {
                layers: ['clusters']
            });
            const clusterId = features[0].properties.cluster_id;
            map.getSource('earthquakes').getClusterExpansionZoom(
                clusterId,
                (err, zoom) => {
                    if (err) return;

                    map.easeTo({
                        center: features[0].geometry.coordinates,
                        zoom: zoom
                    });
                }
            );
        });

        // When a click event occurs on a feature in
        // the unclustered-point layer, open a popup at
        // the location of the feature, with
        // description HTML from its properties.
        map.on('click', 'unclustered-point', (e) => {
            const coordinates = e.features[0].geometry.coordinates.slice();
            const mag = e.features[0].properties.title;
            const desc = e.features[0].properties.description;

            // Ensure that if the map is zoomed out such that
            // multiple copies of the feature are visible, the
            // popup appears over the copy being pointed to.
            while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
            }

            new mapboxgl.Popup()
                .setLngLat(coordinates)
                .setHTML(
                    `${mag}<br>${desc}`
                )
                .addTo(map);
        });

        map.on('mouseenter', 'clusters', () => {
            map.getCanvas().style.cursor = 'pointer';
        });
        map.on('mouseleave', 'clusters', () => {
            map.getCanvas().style.cursor = '';
        });
    });
</script>

  

</body>
</html>
